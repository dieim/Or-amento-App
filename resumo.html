<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resumo</title>

    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

<header>Resumo</header>

<div class="container">

    <div class="card">
        <h2>Despesas por categoria</h2>
        <canvas id="grafico"></canvas>
    </div>

    <div class="card">
        <a href="index.html"><button>Voltar</button></a>
    </div>

</div>

<script src="db.js"></script>

<script>
listarDespesas(despesas => {
    const categorias = {};

    despesas.forEach(d => {
        categorias[d.categoria] = (categorias[d.categoria] || 0) + d.valor;
    });

    new Chart(document.getElementById("grafico"), {
        type: "doughnut",
        data: {
            labels: Object.keys(categorias),
            datasets: [{
                data: Object.values(categorias),
                backgroundColor: [
                    "#0EA5E9", "#38BDF8", "#0284C7",
                    "#0C4A6E", "#0369A1", "#7DD3FC"
                ]
            }]
        }
    });
});
</script>

</body>
</html>
